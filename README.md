# My NixOS Configuration

This repository contains my personal NixOS configuration, managed declaratively using [Nix Flakes](https://nixos.wiki/wiki/Flakes) and [Home Manager](https://github.com/nix-community/home-manager). It's designed to be modular, easily extensible, and reproducible.

The structure is heavily inspired by the modular approach seen in various community dotfiles, with a special credit to [sioodmy's dotfiles](https://github.com/sioodmy/dotfiles) for the `mkSystem` abstraction used in the `flake.nix`.

## âœ¨ Features

-   **Fully Flake-based:** Provides reproducible and hermetic builds.
-   **Modular Design:** A clean, hierarchical module system under `/modules` allows for easy toggling of applications, services, and tools.
-   **Host-specific Configurations:** Easily manage multiple machines with distinct hardware and software needs via the `/hosts` directory.
-   **Wayland Desktop Environment:** A complete desktop setup running on [Hyprland](https://hyprland.org/), featuring:
    -   **Bar:** [Waybar](https://github.com/Alexays/Waybar)
    -   **Launcher:** [Rofi](https://github.com/davatorium/rofi)
    -   **Notifications:** [Dunst](https://dunst-project.org/)
    -   **Login Manager:** SDDM with a custom theme.
-   **Declarative Vim Setup:** A comprehensive [Neovim](https://neovim.io/) configuration managed through [nixvim](https://github.com/nix-community/nixvim), complete with LSP, auto-completion, and other modern amenities.
-   **Home Manager Integration:** Manages user-specific dotfiles, packages, and services cleanly.

## ðŸ“‚ Structure Overview

The repository is organized to separate concerns, making it easy to navigate and modify.

-   `flake.nix`: The main entry point. It defines all the inputs (dependencies like `nixpkgs`, `home-manager`, etc.) and outputs the final `nixosConfigurations`.
-   `hosts/`: Contains configurations specific to each machine.
    -   `orion/`: An example host configuration.
        -   `hardware-configuration.nix`: The hardware-specific settings for this machine, generated by `nixos-generate-config`.
        -   `default.nix`: A simple file that enables all the desired modules for this host from the `/modules` directory.
-   `modules/`: This is where the bulk of the configuration lives. It's broken down into categories:
    -   `app/`: GUI applications (Firefox, Discord, VS Code, etc.).
    -   `cli/`: Command-line tools (Git, fzf, eza, etc.).
    -   `dev/`: Development environments and tools (Nixvim, language toolchains like Rust, Python).
    -   `gui/`: Desktop environment components (Hyprland, Waybar, Rofi, fonts, etc.).
    -   `sys/`: System-level tools and configurations (Zsh, Tmux, XDG).
    -   Each module contains a `default.nix` for system-wide options and a `home.nix` for user-specific settings managed by Home Manager.
-   `lib/`: Contains helper functions, most notably `mkSystem.nix`, which abstracts away the boilerplate of creating a new NixOS system configuration.

## ðŸš€ Usage

### Applying the Configuration

To apply the configuration for an existing host (e.g., `orion`), run the following command from the repository root:

```bash
sudo nixos-rebuild switch --flake .#orion
```

### Adapting for a New Machine

To adapt this configuration for a new machine, follow these steps:

1.  **Clone the repository** to your machine (e.g., in `~/.config/nixos`).

2.  **Generate a hardware configuration** for your new machine:
    ```bash
    nixos-generate-config --show-hardware-config > hosts/<your-hostname>/hardware-configuration.nix
    ```
    (Replace `<your-hostname>` with your machine's actual hostname).

3.  **Create a host definition file** at `hosts/<your-hostname>/default.nix`. In this file, you can enable the modules you want to use. You can copy `hosts/orion/default.nix` as a starting point.

    ```nix
    # hosts/<your-hostname>/default.nix
    {
      config,
      lib,
      inputs,
      ...
    }:

    {
      config.modules = {
        # Enable the modules you want for this machine
        hyprland.enable = true;
        waybar.enable = true;
        rofi.enable = true;
        nixvim.enable = true;
        git.enable = true;
        zsh.enable = true;
        # ... and so on
      };
    }
    ```

4.  **Add your new host to `flake.nix`**:
    ```nix
    # flake.nix
    ...
    in
    {
      nixosConfigurations = {
        orion = mkSystem inputs.nixpkgs "x86_64-linux" "orion" "lenovo-yoga-7-14IAH7-integrated";
        # Add your new host here
        <your-hostname> = mkSystem inputs.nixpkgs "x86_64-linux" "<your-hostname>" "<your-hardware-model>";
      };
    };
    ```
    *(Note: The hardware model is for the `nixos-hardware` module and can be omitted if not used).*

5.  **Build and apply the new configuration**:
    ```bash
    sudo nixos-rebuild switch --flake .#<your-hostname>
    ```

## ðŸŽ¨ Customization

To enable or disable a feature, simply toggle the corresponding module in your host's `default.nix` file (`hosts/<your-hostname>/default.nix`). For example, to disable Waybar, you would change `waybar.enable = true;` to `waybar.enable = false;` or remove the line entirely.
